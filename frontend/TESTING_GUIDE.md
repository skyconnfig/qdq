# 前端功能测试指南

## 🧪 快速测试步骤

### 准备工作

1. **确保后端服务运行在 localhost:8080**
   ```bash
   # 测试后端连接
   curl http://localhost:8080/api/auth/login
   ```

2. **启动前端开发服务器**
   ```bash
   npm run dev
   # 访问 http://localhost:3000
   ```

---

## 1️⃣ 登录认证测试

### 测试步骤
1. 访问 `http://localhost:3000/login`
2. 输入用户名：`admin`
3. 输入密码：`123456`（或您设置的密码）
4. 勾选"记住我"
5. 点击"登录"按钮

### 预期结果
- ✅ 显示"登录成功"提示
- ✅ 跳转到对应角色的默认页面
- ✅ 右上角显示用户名和角色标签
- ✅ LocalStorage 中保存了 token

### 测试数据
```javascript
// 打开浏览器控制台
localStorage.getItem('token') // 应该有值
```

---

## 2️⃣ 比赛管理测试

### 测试场景1：查看比赛列表
1. 访问 `http://localhost:3000/sessions`
2. 查看比赛列表数据

**预期结果**：
- ✅ 显示比赛列表（如果后端有数据）
- ✅ 显示分页控件
- ✅ 可以筛选状态

### 测试场景2：创建比赛
1. 点击右上角"新建比赛"按钮
2. 填写表单：
   - 比赛名称：`测试比赛001`
   - 比赛描述：`这是一场测试比赛`
   - 比赛模式：个人赛
   - 计划开始时间：选择未来时间
3. 点击"确定"

**预期结果**：
- ✅ 显示"创建成功"提示
- ✅ 列表自动刷新
- ✅ 新比赛出现在列表中

### 测试场景3：编辑比赛
1. 点击某个比赛的"详情"按钮
2. 点击"编辑"按钮
3. 修改比赛名称
4. 点击"保存"

**预期结果**：
- ✅ 显示"保存成功"提示
- ✅ 详情页显示更新后的数据

### 测试场景4：删除比赛（草稿状态）
1. 创建一个草稿状态的比赛
2. 点击"删除"按钮
3. 确认删除

**预期结果**：
- ✅ 显示删除确认对话框
- ✅ 确认后显示"删除成功"
- ✅ 比赛从列表中移除

### 测试场景5：比赛控制台
1. 创建一个比赛并开始
2. 点击"控制台"按钮
3. 测试以下操作：
   - 点击"开始比赛"
   - 点击"下一题"
   - 点击"暂停比赛"
   - 点击"恢复比赛"
   - 点击"结束比赛"

**预期结果**：
- ✅ 每个操作都有成功提示
- ✅ 比赛状态正确更新
- ✅ 当前题目正确显示

---

## 3️⃣ 用户管理测试

### 测试场景1：查看用户列表
1. 访问 `http://localhost:3000/users`
2. 查看用户列表

**预期结果**：
- ✅ 显示用户列表
- ✅ 显示用户头像、姓名、状态
- ✅ 分页功能正常

### 测试场景2：创建用户
1. 点击"新建用户"
2. 填写表单：
   - 用户名：`testuser001`
   - 密码：`123456`
   - 姓名：`测试用户`
   - 手机号：`13800138000`
   - 邮箱：`test@example.com`
   - 状态：启用
3. 点击"确定"

**预期结果**：
- ✅ 显示"创建成功"
- ✅ 新用户出现在列表中

### 测试场景3：批量删除
1. 勾选多个用户（不是当前登录用户）
2. 点击"批量删除"按钮
3. 确认删除

**预期结果**：
- ✅ 按钮文字显示"批量删除 (N)"
- ✅ 显示删除确认对话框
- ✅ 删除成功后清空选择

### 测试场景4：重置密码
1. 点击某个用户的"重置密码"按钮
2. 输入新密码：`newpass123`
3. 点击"确定"

**预期结果**：
- ✅ 显示重置密码对话框
- ✅ 显示用户名（只读）
- ✅ 重置成功提示

---

## 4️⃣ 题目管理测试

### 测试场景1：查看题目列表
1. 访问 `http://localhost:3000/questions`
2. 测试筛选：
   - 题型筛选
   - 难度筛选
   - 状态筛选

**预期结果**：
- ✅ 题目列表正确显示
- ✅ 筛选功能工作正常

### 测试场景2：创建题目
1. 点击"新建题目"
2. 填写表单：
   - 题型：单选题
   - 题目：`以下哪个不是前端框架？`
   - 选项A：`Vue.js`
   - 选项B：`React.js`
   - 选项C：`Angular.js`
   - 选项D：`Spring Boot`
   - 答案：`D`
   - 解析：`Spring Boot 是 Java 后端框架`
   - 分值：`10`
   - 难度：简单
   - 状态：已发布
3. 点击"确定"

**预期结果**：
- ✅ 创建成功
- ✅ 题目出现在列表中

### 测试场景3：批量操作
1. 勾选多个题目
2. 点击"批量操作"下拉菜单
3. 选择"设为已发布"

**预期结果**：
- ✅ 显示"批量操作 (N)"按钮
- ✅ 下拉菜单有三个选项
- ✅ 批量更新成功

---

## 5️⃣ 设置页面测试

### 测试场景1：修改密码
1. 访问 `http://localhost:3000/settings`
2. 在"修改密码"卡片中填写：
   - 当前密码：`123456`
   - 新密码：`newpass123`
   - 确认密码：`newpass123`
3. 点击"修改密码"

**预期结果**：
- ✅ 显示"密码修改成功"提示
- ✅ 1.5秒后自动退出登录
- ✅ 跳转到登录页面
- ✅ 可以用新密码登录

### 测试场景2：角色切换（开发测试）
1. 在设置页面顶部找到"角色切换"卡片
2. 点击不同的角色按钮

**预期结果**：
- ✅ 页面刷新
- ✅ 侧边栏菜单改变
- ✅ 右上角角色标签更新

---

## 6️⃣ 仪表盘测试

### 测试场景：查看统计数据
1. 访问 `http://localhost:3000/dashboard`
2. 查看4个统计卡片
3. 查看最近比赛列表
4. 点击快捷操作

**预期结果**：
- ✅ 数字从0动画增长到实际值
- ✅ 统计数据正确（与实际数据一致）
- ✅ 最近比赛列表显示
- ✅ 快捷操作可以跳转

---

## 7️⃣ WebSocket 实时通信测试

### 测试场景：控制台实时抢答
1. 开启两个浏览器窗口
2. 窗口1：打开控制台 `http://localhost:3000/sessions/{id}/control`
3. 窗口2：打开大屏 `http://localhost:3000/bigscreen/{id}`
4. 在控制台推题

**预期结果**：
- ✅ 大屏实时显示题目
- ✅ 控制台显示在线人数
- ✅ 抢答记录实时更新

---

## 🐛 常见问题排查

### 问题1：登录后跳转到 404
**原因**：路由配置问题或角色权限设置错误  
**解决**：
1. 检查用户角色是否正确
2. 检查路由守卫配置
3. 查看控制台错误信息

### 问题2：列表显示"无数据"
**原因**：后端未返回数据或API调用失败  
**解决**：
1. 打开浏览器开发者工具 Network 标签
2. 查看 API 请求是否成功
3. 检查响应数据格式是否正确
4. 确认后端服务正常运行

### 问题3：批量操作按钮不显示
**原因**：未选中任何数据  
**解决**：
1. 勾选表格左侧的复选框
2. 按钮会在选中数据后自动显示

### 问题4：WebSocket 连接失败
**原因**：后端 WebSocket 服务未启动或端口不对  
**解决**：
1. 确认后端 WebSocket 服务运行正常
2. 检查 ws://localhost:8080 是否可访问
3. 查看浏览器控制台 WebSocket 错误

### 问题5：角色切换后菜单未变化
**原因**：需要刷新页面  
**解决**：
1. 角色切换器会自动刷新页面
2. 如果未刷新，手动按 F5

---

## 📊 测试数据准备

### 测试用户数据
```json
{
  "username": "admin",
  "password": "123456",
  "roles": ["SUPER_ADMIN"]
}

{
  "username": "host01",
  "password": "123456",
  "roles": ["HOST"]
}

{
  "username": "player01",
  "password": "123456",
  "roles": ["PLAYER"]
}
```

### 测试比赛数据
```json
{
  "name": "第一届知识竞赛",
  "description": "测试比赛描述",
  "mode": 1,
  "questionIds": [1, 2, 3, 4, 5],
  "scheduledStart": "2025-12-15T10:00:00Z"
}
```

### 测试题目数据
```json
{
  "type": 1,
  "title": "Vue.js 是什么？",
  "options": [
    {"key": "A", "value": "前端框架"},
    {"key": "B", "value": "后端框架"},
    {"key": "C", "value": "数据库"},
    {"key": "D", "value": "编程语言"}
  ],
  "answer": "A",
  "analysis": "Vue.js 是一个渐进式 JavaScript 前端框架",
  "score": 10,
  "difficulty": 1,
  "status": 1
}
```

---

## ✅ 测试检查清单

### 基础功能
- [ ] 登录/登出
- [ ] 角色权限
- [ ] 路由跳转
- [ ] 菜单显示

### 数据管理
- [ ] 列表查询
- [ ] 创建数据
- [ ] 更新数据
- [ ] 删除数据
- [ ] 批量操作
- [ ] 搜索筛选
- [ ] 分页功能

### 比赛功能
- [ ] 比赛创建
- [ ] 比赛编辑
- [ ] 比赛删除
- [ ] 比赛详情
- [ ] 开始比赛
- [ ] 暂停/恢复
- [ ] 推题控制
- [ ] 抢答处理
- [ ] 大屏展示

### 用户体验
- [ ] 加载状态
- [ ] 错误提示
- [ ] 成功提示
- [ ] 确认对话框
- [ ] 表单验证
- [ ] 响应式布局

### 实时功能
- [ ] WebSocket 连接
- [ ] 实时推题
- [ ] 实时抢答
- [ ] 在线人数
- [ ] 状态同步

---

## 🎯 测试完成标准

全部功能测试通过后，应该能够：

1. ✅ 不同角色登录看到不同界面
2. ✅ 完整的比赛创建、管理、控制流程
3. ✅ 用户和题目的增删改查
4. ✅ 批量操作正常工作
5. ✅ 实时通信功能正常
6. ✅ 所有API调用成功
7. ✅ 错误处理得当
8. ✅ 用户体验流畅

测试愉快！🚀
